class GhostCursorTrail{constructor(t={}){this.config={container:document.body,ghostColor:"#ffffff",eyeColor:"#161616",scale:.7,followSpeed:10,velocityMultiplier:8,zIndex:9999,responsive:!0,autoStart:!1,...t},this.isActive=!1,this.animationId=null,this.mouse={x:window.innerWidth/2,y:window.innerHeight/2,dir:""},this.clicked=!1,this.pos={x:0,y:0},this.ghostElement=null,this.mouthElement=null,this.eyesElement=null,this.svgElement=null,this.boundMouseMove=this.handleMouseMove.bind(this),this.boundMouseDown=this.handleMouseDown.bind(this),this.boundMouseUp=this.handleMouseUp.bind(this),this.boundTouchStart=this.handleTouchStart.bind(this),this.boundTouchMove=this.handleTouchMove.bind(this),this.config.autoStart&&this.start()}createGhostElement(){this.ghostElement=document.createElement("div"),this.ghostElement.className="ghost-cursor-trail ghost-cursor-trail--hidden",this.ghostElement.style.zIndex=this.config.zIndex,this.ghostElement.style.setProperty("--ghost-color",this.config.ghostColor),this.ghostElement.style.setProperty("--eye-color",this.config.eyeColor);let t=document.createElement("div");t.className="ghost-cursor-trail__head",this.eyesElement=document.createElement("div"),this.eyesElement.className="ghost-cursor-trail__eyes",this.mouthElement=document.createElement("div"),this.mouthElement.className="ghost-cursor-trail__mouth";let e=document.createElement("div");e.className="ghost-cursor-trail__tail";let s=document.createElement("div");return s.className="ghost-cursor-trail__rip",t.appendChild(this.eyesElement),t.appendChild(this.mouthElement),e.appendChild(s),this.ghostElement.appendChild(t),this.ghostElement.appendChild(e),this.ghostElement}createSVGFilter(){return this.svgElement=document.createElement("div"),this.svgElement.className="ghost-cursor-trail-svg",this.svgElement.innerHTML=`
            <svg xmlns="http://www.w3.org/2000/svg" version="1.1">
                <defs>
                    <filter id="ghost-cursor-goo">
                        <feGaussianBlur
                            in="SourceGraphic"
                            stdDeviation="10"
                            result="ghost-blur" />
                        <feColorMatrix
                            in="ghost-blur"
                            mode="matrix"
                            values="
                                1 0 0 0 0
                                0 1 0 0 0
                                0 0 1 0 0
                                0 0 0 16 -7"
                            result="ghost-gooey" />
                    </filter>
                </defs>
            </svg>
        `,this.svgElement}handleMouseMove(t){this.mouse={x:t.clientX||t.pageX||window.innerWidth/2,y:t.clientY||t.pageY||window.innerHeight/2,dir:this.mouse.x>t.clientX?"left":"right"}}handleTouchMove(t){t.touches&&t.touches[0]&&(this.mouse={x:t.touches[0].pageX||window.innerWidth/2,y:t.touches[0].pageY||window.innerHeight/2,dir:this.mouse.x>t.touches[0].pageX?"left":"right"})}handleTouchStart(t){this.handleTouchMove(t)}handleMouseDown(t){t.preventDefault(),this.clicked=!0}handleMouseUp(){this.clicked=!1}map(t,e,s,i,o){return(t-e)*(o-i)/(s-e)+i}updateGhost(){if(!this.ghostElement||!this.isActive)return;let t=this.mouse.x-this.pos.x,e=this.mouse.y-this.pos.y,s=t/this.config.velocityMultiplier,i=e/this.config.velocityMultiplier;this.pos.x+=t/this.config.followSpeed,this.pos.y+=e/this.config.followSpeed;let o=this.map(s,0,100,0,-50),h=this.map(i,0,100,1,2),n=this.map(Math.abs(s),0,100,1,1.2),l=this.map(Math.abs(2*s),0,100,1,.1),r=Math.min(Math.max(this.map(Math.abs(1.5*s),0,100,0,10),this.map(Math.abs(1.2*i),0,100,0,5)),2);this.clicked&&(l=.4,r=-r),this.ghostElement.style.transform=`
            translate(${this.pos.x}px, ${this.pos.y}px) 
            scale(${this.config.scale}) 
            skew(${o}deg) 
            rotate(${-o}deg) 
            scaleY(${h})
        `,this.eyesElement.style.transform=`
            translateX(-50%) 
            scale(${n}, ${l})
        `,this.mouthElement.style.transform=`
            translate(${-(.5*o)-10}px) 
            scale(${r})
        `}animate(){this.isActive&&(this.updateGhost(),this.animationId=requestAnimationFrame(()=>this.animate()))}addEventListeners(){let t=[["mousemove",this.boundMouseMove],["touchstart",this.boundTouchStart],["touchmove",this.boundTouchMove],["mousedown",this.boundMouseDown],["mouseup",this.boundMouseUp]];t.forEach(([t,e])=>{window.addEventListener(t,e,{passive:!1})})}removeEventListeners(){let t=[["mousemove",this.boundMouseMove],["touchstart",this.boundTouchStart],["touchmove",this.boundTouchMove],["mousedown",this.boundMouseDown],["mouseup",this.boundMouseUp]];t.forEach(([t,e])=>{window.removeEventListener(t,e)})}start(){return this.isActive||(this.ghostElement||(this.createGhostElement(),this.createSVGFilter(),this.config.container.appendChild(this.ghostElement),this.config.container.appendChild(this.svgElement)),this.ghostElement.classList.remove("ghost-cursor-trail--hidden"),this.ghostElement.classList.add("ghost-cursor-trail--visible"),this.isActive=!0,this.addEventListeners(),this.animate()),this}stop(){return this.isActive&&(this.isActive=!1,this.removeEventListeners(),this.animationId&&(cancelAnimationFrame(this.animationId),this.animationId=null),this.ghostElement&&(this.ghostElement.classList.remove("ghost-cursor-trail--visible"),this.ghostElement.classList.add("ghost-cursor-trail--hidden"))),this}destroy(){return this.stop(),this.ghostElement&&this.ghostElement.parentNode&&this.ghostElement.parentNode.removeChild(this.ghostElement),this.svgElement&&this.svgElement.parentNode&&this.svgElement.parentNode.removeChild(this.svgElement),this.ghostElement=null,this.mouthElement=null,this.eyesElement=null,this.svgElement=null,this}updateConfig(t){return this.config={...this.config,...t},this.ghostElement&&(this.ghostElement.style.setProperty("--ghost-color",this.config.ghostColor),this.ghostElement.style.setProperty("--eye-color",this.config.eyeColor),this.ghostElement.style.zIndex=this.config.zIndex),this}getConfig(){return{...this.config}}isRunning(){return this.isActive}}"undefined"!=typeof module&&module.exports?module.exports=GhostCursorTrail:"function"==typeof define&&define.amd?define([],function(){return GhostCursorTrail}):window.GhostCursorTrail=GhostCursorTrail;